<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interim Benefit Offer Response</title>
    
    <style>
        /* CSS RESET & DEFAULTS */
        :root {
            /* Legal Aid Colour Palette */
            --brand-red-primary: #C10E02;
            --brand-red-dark: #A10C02;
            --brand-blue-dark: #002C4D;
            --brand-blue-primary: #004A80;
            --brand-blue-light: #E5EDF2;
            --brand-green-success: #21A179;
            --brand-gray-text-primary: #1D1D1D;
            --brand-gray-text-secondary: #545454;
            --brand-gray-border: #C8C8C8;
            --brand-gray-background-light: #F4F5F6;
            --brand-white: #FFFFFF;

            /* Typography */
            --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            
            /* Borders */
            --border-radius-medium: 4px;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
        }

        body {
            margin: 0;
            font-family: var(--font-family-sans);
            background-color: var(--brand-gray-background-light);
            color: var(--brand-gray-text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* TYPOGRAPHY STYLES */
        .heading-1 {
            font-size: 2rem; /* 32px */
            font-weight: 700;
            line-height: 1.25;
            margin: 0 0 var(--space-md) 0;
        }
        .heading-3 {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            line-height: 1.3;
            margin: 0 0 var(--space-sm) 0;
        }
        .heading-5 {
            font-size: 1rem; /* 16px */
            font-weight: 700;
            letter-spacing: 0.025em;
            text-transform: uppercase;
            color: var(--brand-gray-text-secondary);
            margin-bottom: var(--space-md);
        }
        .body-large {
            font-size: 1.125rem; /* 18px */
        }
        .body-paragraph {
            font-size: 1rem; /* 16px */
            margin-bottom: var(--space-md);
        }
        .body-small {
            font-size: 0.875rem; /* 14px */
            color: var(--brand-gray-text-secondary);
        }
        .text-strong {
            font-weight: 700;
        }

        /* LAYOUT & CONTAINER */
        .page-container {
            max-width: 800px;
            margin: var(--space-xl) auto;
            padding: var(--space-lg);
        }

        .card {
            background-color: var(--brand-white);
            border: 1px solid var(--brand-gray-border);
            border-radius: var(--border-radius-medium);
            padding: var(--space-xl);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: opacity 0.3s ease-in-out;
        }
        
        .card + .card {
            margin-top: var(--space-lg);
        }
        
        .page-header {
            text-align: center;
            margin-bottom: var(--space-xl);
        }
        
        .logo {
            color: var(--brand-red-primary);
            font-weight: 800;
            font-size: 1.5rem;
            margin-bottom: var(--space-md);
        }
        
        /* FORM ELEMENTS */
        .form-section {
            padding: var(--space-lg) 0;
            border-bottom: 1px solid var(--brand-gray-background-light);
        }
        .form-section:last-of-type {
            border-bottom: none;
        }
        .form-element {
            margin-bottom: var(--space-lg);
        }
        .form-element__label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }
        .form-element__control {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }
        .input-field, .select-field {
            width: 100%;
            padding: 10px 12px;
            font-size: 1rem;
            border: 1px solid var(--brand-gray-border);
            border-radius: var(--border-radius-medium);
            background-color: var(--brand-white);
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .input-field:focus, .select-field:focus {
            outline: none;
            border-color: var(--brand-blue-primary);
            box-shadow: 0 0 0 2px rgba(0, 74, 128, 0.2);
        }
        .input-field[readonly] {
            background-color: var(--brand-gray-background-light);
            cursor: not-allowed;
            color: var(--brand-gray-text-secondary);
        }
        
        /* RADIO & CHECKBOX (CRITICAL STYLING) */
        .radio-group, .checkbox-group {
            position: relative;
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            border: 1px solid var(--brand-gray-border);
            border-radius: var(--border-radius-medium);
            transition: border-color 0.2s, background-color 0.2s;
        }
        .radio-group:hover, .checkbox-group:hover {
            border-color: var(--brand-blue-primary);
        }
        .radio-group input[type="radio"],
        .checkbox-group input[type="checkbox"] {
            opacity: 0;
            width: 0;
            height: 0;
            position: absolute;
        }
        .radio-group .control-indicator,
        .checkbox-group .control-indicator {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            border: 2px solid var(--brand-gray-border);
            background-color: var(--brand-white);
            margin-right: 12px;
            transition: border-color 0.2s;
            position: relative;
        }
        .radio-group .control-indicator {
            border-radius: 50%;
        }
        .checkbox-group .control-indicator {
            border-radius: 3px;
        }
        
        /* Selected States */
        .radio-group input[type="radio"]:checked ~ .control-indicator {
            border-color: var(--brand-red-primary);
        }
        .radio-group input[type="radio"]:checked ~ .control-indicator::after {
            content: '';
            display: block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--brand-red-primary); /* CRITICAL: RED INNER DOT */
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .checkbox-group input[type="checkbox"]:checked ~ .control-indicator {
            border-color: var(--brand-red-primary);
            background-color: var(--brand-white);
        }
        .checkbox-group input[type="checkbox"]:checked ~ .control-indicator::after {
            content: '';
            display: block;
            width: 5px;
            height: 10px;
            border: solid var(--brand-red-primary); /* CRITICAL: RED CHECKMARK */
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
            position: absolute;
            left: 6px;
            top: 2px;
        }
        
        /* Focus States */
        .radio-group input[type="radio"]:focus-visible ~ .control-indicator,
        .checkbox-group input[type="checkbox"]:focus-visible ~ .control-indicator {
             box-shadow: 0 0 0 2px rgba(193, 14, 2, 0.3); /* RED FOCUS GLOW */
        }
        
        /* BUTTONS */
        .btn {
            display: inline-block;
            font-size: 1rem;
            font-weight: 600;
            padding: 12px 24px;
            border-radius: var(--border-radius-medium);
            border: 1px solid transparent;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            transition: background-color 0.2s, color 0.2s, opacity 0.2s;
            position: relative;
        }
        .btn-primary {
            background-color: var(--brand-red-primary);
            color: var(--brand-white);
            border-color: var(--brand-red-primary);
        }
        .btn-primary:hover:not(:disabled) {
            background-color: var(--brand-red-dark);
            border-color: var(--brand-red-dark);
        }
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .btn-block {
            display: block;
            width: 100%;
        }
        
        /* FILE UPLOAD */
        .file-upload-wrapper {
            border: 2px dashed var(--brand-gray-border);
            border-radius: var(--border-radius-medium);
            padding: var(--space-xl);
            text-align: center;
            cursor: pointer;
            transition: border-color 0.2s, background-color 0.2s;
        }
        .file-upload-wrapper:hover {
            border-color: var(--brand-blue-primary);
            background-color: var(--brand-blue-light);
        }
        .file-upload-wrapper input[type="file"] {
            display: none;
        }
        .file-upload-icon {
            font-size: 2.5rem;
            color: var(--brand-blue-primary);
        }
        .file-upload-text {
            margin-top: var(--space-md);
            color: var(--brand-blue-primary);
            font-weight: 600;
        }
        .file-upload-hint, .file-name {
            margin-top: var(--space-sm);
            font-size: 0.875rem;
            color: var(--brand-gray-text-secondary);
        }
        
        /* CONDITIONAL SECTIONS & UTILITIES */
        .conditional-section {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding: 0 var(--space-lg);
            margin: 0 calc(-1 * var(--space-lg));
        }
        .conditional-section.visible {
            max-height: 1000px; /* Large enough for content */
            opacity: 1;
            padding: var(--space-lg);
            margin: var(--space-lg) calc(-1 * var(--space-lg)) 0;
            background: var(--brand-blue-light);
            border-radius: var(--border-radius-medium);
        }
        .hidden {
            display: none;
        }
        .error-message {
            color: var(--brand-red-primary);
            font-size: 0.875rem;
            margin-top: var(--space-xs);
        }
        .input-field.has-error {
            border-color: var(--brand-red-primary);
        }
        
        /* INFO BANNER */
        .info-banner {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: var(--space-md);
            background-color: var(--brand-blue-light);
            border-left: 4px solid var(--brand-blue-primary);
            padding: var(--space-md);
            border-radius: var(--border-radius-medium);
            margin-bottom: var(--space-lg);
        }
        .info-banner__icon {
            font-size: 1.5rem;
            color: var(--brand-blue-primary);
            align-self: center;
        }
        
        /* SUCCESS STATE */
        .success-container {
            text-align: center;
        }
        .success-icon {
            font-size: 4rem;
            color: var(--brand-green-success);
        }
        
        /* LOADER */
        .loader {
            width: 18px;
            height: 18px;
            border: 2px solid var(--brand-white);
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
            position: absolute;
            left: 24px;
            top: 50%;
            margin-top: -9px;
        }
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .page-container {
                margin: var(--space-lg) auto;
                padding: var(--space-md);
            }
            .card {
                padding: var(--space-lg);
            }
            .heading-1 {
                font-size: 1.75rem;
            }
        }
        
    </style>
</head>
<body>

    <main class="page-container" id="main-container">
        <header class="page-header">
            <div class="logo">LEGAL AID</div>
            <h1 class="heading-1">Interim Benefit Offer Response</h1>
        </header>

        <div class="card" id="response-form-card">
            <form id="interimBenefitForm" novalidate>
                <!-- Injured Worker Details -->
                <section class="form-section">
                    <h2 class="heading-5">Offer Details</h2>
                    <div class="form-element">
                        <label class="form-element__label" for="injuredWorkerName">Injured Worker Name</label>
                        <input type="text" id="injuredWorkerName" class="input-field" value="Jane Doe" readonly aria-label="Injured Worker Name">
                    </div>
                    <div class="form-element">
                        <label class="form-element__label" for="claimNumber">Claim Number</label>
                        <input type="text" id="claimNumber" class="input-field" value="C-12345678" readonly aria-label="Claim Number">
                    </div>
                </section>

                <!-- Medical Expenses Offer -->
                <section class="form-section">
                    <h3 class="heading-3">Medical Expenses</h3>
                    <p class="body-paragraph">You have been offered interim support for medical expenses while your claim is being assessed.</p>
                    <div class="form-element">
                        <label class="form-element__label" for="claimMedicalExpensesYes">Do you intend to claim medical expenses?</label>
                        <div id="medical-expenses-group" class="form-element__control" role="radiogroup" aria-labelledby="medical-expenses-label">
                            <label class="radio-group">
                                <input type="radio" name="claimMedicalExpenses" id="claimMedicalExpensesYes" value="yes" required>
                                <span class="control-indicator"></span>
                                <span>Yes, I intend to claim medical expenses.</span>
                            </label>
                            <label class="radio-group">
                                <input type="radio" name="claimMedicalExpenses" id="claimMedicalExpensesNo" value="no" required>
                                <span class="control-indicator"></span>
                                <span>No, I do not intend to claim medical expenses at this time.</span>
                            </label>
                        </div>
                        <div id="medical-expenses-error" class="error-message" role="alert" aria-live="assertive"></div>
                    </div>
                </section>

                <!-- Income Support Offer -->
                <section class="form-section">
                    <h3 class="heading-3">Income Support</h3>
                    <p class="body-paragraph">You have been offered interim income support while your claim is being assessed.</p>
                    <div class="info-banner">
                        <div class="info-banner__icon" aria-hidden="true">&#x24D8;</div>
                        <div>
                            <p class="text-strong">Weekly Benefit Amount: $850.50</p>
                            <p class="text-strong">Payment Start Date: 28 August 2024</p>
                        </div>
                    </div>
                    <div class="form-element">
                        <label class="form-element__label" id="income-support-label">Do you accept the weekly income support offer?</label>
                        <div id="income-support-group" class="form-element__control" role="radiogroup" aria-labelledby="income-support-label">
                            <label class="radio-group">
                                <input type="radio" name="acceptIncomeSupport" id="acceptIncomeSupportYes" value="yes" required>
                                <span class="control-indicator"></span>
                                <span>Yes, I accept the offer.</span>
                            </label>
                            <label class="radio-group">
                                <input type="radio" name="acceptIncomeSupport" id="acceptIncomeSupportNo" value="no" required>
                                <span class="control-indicator"></span>
                                <span>No, I do not accept the offer.</span>
                            </label>
                        </div>
                         <div id="income-support-error" class="error-message" role="alert" aria-live="assertive"></div>
                    </div>
                </section>
                
                <!-- Conditional: EFT Details -->
                <div id="eftDetailsSection" class="conditional-section">
                     <h3 class="heading-3">Bank Account Details for Payment</h3>
                     <p class="body-paragraph">Please provide your bank details for payments. Payments are made via Electronic Funds Transfer (EFT).</p>
                     <div class="form-element">
                        <label class="form-element__label" for="bsb">BSB</label>
                        <input type="text" id="bsb" class="input-field" placeholder="e.g., 000-000" maxlength="7" pattern="[0-9]{3}-?[0-9]{3}">
                        <div id="bsb-error" class="error-message" role="alert" aria-live="assertive"></div>
                     </div>
                     <div class="form-element">
                        <label class="form-element__label" for="accountNumber">Account Number</label>
                        <input type="text" id="accountNumber" class="input-field" placeholder="e.g., 123456789" maxlength="10" pattern="[0-9]{1,10}">
                        <div id="accountNumber-error" class="error-message" role="alert" aria-live="assertive"></div>
                     </div>
                     <div class="form-element">
                        <label class="form-element__label" for="accountName">Account Name</label>
                        <input type="text" id="accountName" class="input-field" placeholder="e.g., J Doe">
                        <div id="accountName-error" class="error-message" role="alert" aria-live="assertive"></div>
                     </div>
                </div>
                
                <!-- Conditional: TFN Upload -->
                <div id="tfnUploadSection" class="conditional-section">
                    <h3 class="heading-3">Tax File Number (TFN) Declaration</h3>
                    <p class="body-paragraph">To ensure your payments are taxed correctly, please upload a completed TFN Declaration form.</p>
                    <label for="tfnFile" class="file-upload-wrapper">
                        <input type="file" id="tfnFile" accept=".pdf,.jpg,.jpeg,.png">
                        <div class="file-upload-icon" aria-hidden="true">&#x21E1;</div>
                        <div class="file-upload-text">Click to upload or drag and drop</div>
                        <div class="file-upload-hint">PDF, JPG, PNG (Max 5MB)</div>
                    </label>
                    <div class="file-name" id="fileNameDisplay"></div>
                    <div id="tfnFile-error" class="error-message" role="alert" aria-live="assertive"></div>
                </div>

                <!-- Declaration -->
                <section class="form-section">
                    <h3 class="heading-3">Declaration</h3>
                     <div class="form-element">
                        <label class="checkbox-group">
                            <input type="checkbox" id="declarationCheck" name="declarationCheck" required>
                            <span class="control-indicator"></span>
                            <span class="body-small">I declare that the information provided is true and correct. I understand that my response is final.</span>
                        </label>
                        <div id="declarationCheck-error" class="error-message" role="alert" aria-live="assertive"></div>
                    </div>
                </section>

                <!-- Form Actions -->
                <div class="form-actions" style="margin-top: var(--space-xl);">
                    <button type="submit" id="submitButton" class="btn btn-primary btn-block">
                        Submit Response
                    </button>
                </div>
            </form>
        </div>
        
        <div class="card hidden" id="success-message-card">
            <div class="success-container">
                 <div class="success-icon" aria-hidden="true">&#x2713;</div>
                 <h2 class="heading-3">Thank you, your response has been submitted.</h2>
                 <p class="body-paragraph">We have received your interim benefit offer response. You will be contacted shortly regarding the next steps.</p>
                 <p class="body-small">This page is no longer active. You may now close this window.</p>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // FORM ELEMENTS
            const form = document.getElementById('interimBenefitForm');
            const submitButton = document.getElementById('submitButton');
            const formCard = document.getElementById('response-form-card');
            const successCard = document.getElementById('success-message-card');
            
            // CONDITIONAL SECTION TRIGGERS
            const medicalRadios = document.querySelectorAll('input[name="claimMedicalExpenses"]');
            const incomeRadios = document.querySelectorAll('input[name="acceptIncomeSupport"]');
            
            // CONDITIONAL SECTIONS
            const eftSection = document.getElementById('eftDetailsSection');
            const tfnSection = document.getElementById('tfnUploadSection');
            
            // FILE UPLOAD
            const fileInput = document.getElementById('tfnFile');
            const fileNameDisplay = document.getElementById('fileNameDisplay');
            
            // VALIDATION FIELDS
            const bsbInput = document.getElementById('bsb');
            const accountNumberInput = document.getElementById('accountNumber');
            const accountNameInput = document.getElementById('accountName');
            const declarationCheck = document.getElementById('declarationCheck');

            // --- FUNCTIONS ---

            const toggleConditionalSections = () => {
                const intendToClaimMedical = document.querySelector('input[name="claimMedicalExpenses"]:checked')?.value === 'yes';
                const acceptIncomeSupport = document.querySelector('input[name="acceptIncomeSupport"]:checked')?.value === 'yes';
                
                // Show EFT if EITHER is accepted
                if (intendToClaimMedical || acceptIncomeSupport) {
                    eftSection.classList.add('visible');
                } else {
                    eftSection.classList.remove('visible');
                }
                
                // Show TFN only if income support is accepted
                if (acceptIncomeSupport) {
                    tfnSection.classList.add('visible');
                } else {
                    tfnSection.classList.remove('visible');
                }
            };

            const handleFileSelect = (event) => {
                const file = event.target.files[0];
                if (file) {
                    fileNameDisplay.textContent = `Selected file: ${file.name}`;
                    clearError(fileInput.id);
                } else {
                    fileNameDisplay.textContent = '';
                }
            };
            
            const clearErrors = () => {
                document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
                document.querySelectorAll('.has-error').forEach(el => el.classList.remove('has-error'));
            };
            
            const showError = (fieldId, message) => {
                const errorEl = document.getElementById(`${fieldId}-error`);
                const fieldEl = document.getElementById(fieldId);

                if (errorEl) {
                    errorEl.textContent = message;
                }
                if (fieldEl && fieldEl.classList.contains('input-field')) {
                    fieldEl.classList.add('has-error');
                }
            };

            const clearError = (fieldId) => {
                const errorEl = document.getElementById(`${fieldId}-error`);
                const fieldEl = document.getElementById(fieldId);

                if (errorEl) errorEl.textContent = '';
                if (fieldEl) fieldEl.classList.remove('has-error');
            };

            const validateForm = () => {
                clearErrors();
                let isValid = true;

                const medicalResponse = document.querySelector('input[name="claimMedicalExpenses"]:checked');
                if (!medicalResponse) {
                    isValid = false;
                    showError('medical-expenses-group', 'Please select a response for medical expenses.');
                }

                const incomeResponse = document.querySelector('input[name="acceptIncomeSupport"]:checked');
                if (!incomeResponse) {
                    isValid = false;
                    showError('income-support-group', 'Please select a response for income support.');
                }
                
                if (eftSection.classList.contains('visible')) {
                    if (!bsbInput.value.trim()) {
                        isValid = false;
                        showError('bsb', 'BSB is required.');
                    }
                    if (!accountNumberInput.value.trim()) {
                        isValid = false;
                        showError('accountNumber', 'Account Number is required.');
                    }
                    if (!accountNameInput.value.trim()) {
                        isValid = false;
                        showError('accountName', 'Account Name is required.');
                    }
                }
                
                if (!declarationCheck.checked) {
                    isValid = false;
                    showError('declarationCheck', 'You must agree to the declaration.');
                }

                return isValid;
            };

            const handleFormSubmit = (event) => {
                event.preventDefault();
                
                if (!validateForm()) {
                    return;
                }

                // Show loading state
                const originalButtonText = submitButton.textContent;
                submitButton.disabled = true;
                submitButton.innerHTML = `<span class="loader"></span>Submitting...`;
                
                // Simulate network request
                setTimeout(() => {
                    // Collect form data (for console log simulation)
                    const formData = {
                        injuredWorkerName: document.getElementById('injuredWorkerName').value,
                        claimNumber: document.getElementById('claimNumber').value,
                        claimMedicalExpenses: document.querySelector('input[name="claimMedicalExpenses"]:checked').value,
                        acceptIncomeSupport: document.querySelector('input[name="acceptIncomeSupport"]:checked').value,
                        eftDetails: {
                            bsb: bsbInput.value,
                            accountNumber: accountNumberInput.value,
                            accountName: accountNameInput.value,
                        },
                        tfnFile: fileInput.files[0] ? fileInput.files[0].name : 'Not provided',
                        declarationChecked: declarationCheck.checked,
                        submissionTimestamp: new Date().toISOString()
                    };
                    
                    console.log('--- Form Submission Data ---');
                    console.log(formData);
                    
                    // Show success state and "expire" the form
                    formCard.style.opacity = '0';
                    setTimeout(() => {
                        formCard.classList.add('hidden');
                        successCard.classList.remove('hidden');
                    }, 300);

                }, 1500);
            };

            // --- EVENT LISTENERS ---
            medicalRadios.forEach(radio => radio.addEventListener('change', toggleConditionalSections));
            incomeRadios.forEach(radio => radio.addEventListener('change', toggleConditionalSections));
            fileInput.addEventListener('change', handleFileSelect);
            form.addEventListener('submit', handleFormSubmit);

            // --- INITIALIZATION ---
            toggleConditionalSections(); // Run on page load
        });
    </script>
</body>
</html>