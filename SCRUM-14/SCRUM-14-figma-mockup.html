<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interim Benefit Offer Response</title>
    <style>
        /* --- DESIGN SYSTEM & VARIABLES --- */
        :root {
            /* Colors from Legal Aid Colour Palette */
            --brand-primary-red: #C10E02;
            --brand-primary-red-dark: #A10C02;
            --brand-trusted-blue: #004A80;
            --brand-blue-background: #E5EDF2;
            --brand-calming-green: #21A179;
            --brand-text-dark: #1D1D1D;
            --brand-text-secondary: #545454;
            --brand-border-color: #C8C8C8;
            --brand-background-light: #F4F5F6;
            --brand-background-disabled: #E6E6E6;
            --brand-white: #FFFFFF;
            --brand-focus-shadow: 0 0 0 2px rgba(193, 14, 2, 0.4);

            /* Typography */
            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            
            /* Spacing (based on 8px grid) */
            --space-x-small: 4px;
            --space-small: 8px;
            --space-medium: 16px;
            --space-large: 24px;
            --space-x-large: 32px;

            /* Borders & Shadows */
            --border-radius: 4px;
            --shadow-card: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
        }

        /* --- BASE & RESET --- */
        *, *::before, *::after {
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
        }

        body {
            margin: 0;
            font-family: var(--font-family-sans-serif);
            background-color: var(--brand-background-light);
            color: var(--brand-text-dark);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- TYPOGRAPHY --- */
        h1, h2, h3 {
            margin: 0 0 var(--space-medium) 0;
            font-weight: 600;
        }
        h1 {
            font-size: 2rem; /* Heading 3 in Figma */
            line-height: 1.2;
        }
        h2 {
            font-size: 1.5rem; /* Heading 4 in Figma */
            color: var(--brand-text-dark);
            padding-bottom: var(--space-small);
            border-bottom: 1px solid var(--brand-border-color);
            margin-bottom: var(--space-large);
        }
        h3 {
            font-size: 1.125rem; /* Heading 5 in Figma */
            font-weight: 700;
            margin-bottom: var(--space-small);
        }
        p {
            margin: 0 0 var(--space-medium) 0;
        }
        label, .label-strong {
            font-weight: 600;
            display: block;
            margin-bottom: var(--space-small);
            font-size: 0.875rem;
        }
        .text-small {
            font-size: 0.875rem;
            color: var(--brand-text-secondary);
        }

        /* --- LAYOUT & CARD --- */
        .page-container {
            max-width: 800px;
            margin: var(--space-large) auto;
            padding: var(--space-medium);
        }
        .page-header {
            text-align: center;
            margin-bottom: var(--space-x-large);
        }
        .logo {
            color: var(--brand-primary-red);
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: var(--space-small);
            /* Simple text logo as placeholder */
        }
        .card {
            background-color: var(--brand-white);
            border: 1px solid var(--brand-border-color);
            border-radius: var(--border-radius);
            padding: var(--space-large);
            margin-bottom: var(--space-large);
            box-shadow: var(--shadow-card);
            transition: all 0.2s ease-in-out;
        }
        .form-section {
            padding: var(--space-medium) 0;
        }
        .form-section:not(:last-child) {
            border-bottom: 1px solid var(--brand-background-light);
        }

        /* --- FORM COMPONENTS --- */
        .form-group {
            margin-bottom: var(--space-large);
        }
        .read-only-field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-medium) 0;
        }
        .read-only-field .label {
            color: var(--brand-text-secondary);
        }
        .read-only-field .value {
            font-weight: 600;
        }
        
        /* Radio and Checkbox Styling (CRITICAL per spec) */
        .form-control {
            position: relative;
            display: flex;
            align-items: center;
            margin-bottom: var(--space-medium);
            cursor: pointer;
        }
        .form-control input[type="radio"],
        .form-control input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            width: 1px;
            height: 1px;
        }
        .form-control .control-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: var(--space-medium);
            background-color: var(--brand-white);
            border: 2px solid var(--brand-border-color);
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        .form-control input[type="radio"] + .control-indicator {
            border-radius: 50%;
        }
        .form-control input[type="checkbox"] + .control-indicator {
            border-radius: var(--border-radius);
        }
        .form-control:hover input:not(:disabled) + .control-indicator {
            border-color: var(--brand-primary-red);
        }
        .form-control input:focus-visible + .control-indicator {
            box-shadow: var(--brand-focus-shadow);
        }
        .form-control input:checked + .control-indicator {
            background-color: var(--brand-white);
            border-color: var(--brand-primary-red);
        }
        .form-control .control-indicator::after {
            content: '';
            display: block;
            position: relative;
            opacity: 0;
            transition: all 0.2s ease;
        }
        /* Radio inner dot - MUST BE RED */
        .form-control input[type="radio"]:checked + .control-indicator::after {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--brand-primary-red);
            top: 3px;
            left: 3px;
            opacity: 1;
        }
        /* Checkbox checkmark - MUST BE RED */
        .form-control input[type="checkbox"]:checked + .control-indicator::after {
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid var(--brand-primary-red);
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
            opacity: 1;
        }
        .form-control-label {
            line-height: 1.3;
        }

        /* Text Input */
        .input-text {
            width: 100%;
            padding: var(--space-medium);
            border: 1px solid var(--brand-border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .input-text:focus {
            outline: none;
            border-color: var(--brand-primary-red);
            box-shadow: var(--brand-focus-shadow);
        }

        /* File Upload */
        .file-upload-wrapper {
            position: relative;
            border: 2px dashed var(--brand-border-color);
            border-radius: var(--border-radius);
            padding: var(--space-large);
            text-align: center;
            transition: border-color 0.2s ease;
        }
        .file-upload-wrapper:hover {
            border-color: var(--brand-primary-red);
        }
        .file-upload-wrapper input[type="file"] {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            cursor: pointer;
        }
        .file-upload-label {
            font-weight: 600;
            color: var(--brand-trusted-blue);
            cursor: pointer;
        }
        #fileName {
            display: block;
            margin-top: var(--space-small);
            font-style: italic;
            color: var(--brand-text-secondary);
        }

        /* --- BUTTONS --- */
        .btn {
            display: inline-block;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            padding: var(--space-medium) var(--space-large);
            border: 1px solid transparent;
            border-radius: var(--border-radius);
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }
        .btn:focus-visible {
            outline: none;
            box-shadow: var(--brand-focus-shadow);
        }
        .btn:active {
            transform: scale(0.98);
        }
        .btn-primary {
            background-color: var(--brand-primary-red);
            color: var(--brand-white);
        }
        .btn-primary:hover {
            background-color: var(--brand-primary-red-dark);
        }
        .btn-primary:disabled {
            background-color: var(--brand-border-color);
            cursor: not-allowed;
            transform: none;
        }
        .btn-block {
            width: 100%;
            display: block;
        }

        /* --- UTILITIES & HELPERS --- */
        .hidden {
            display: none !important;
        }
        .conditional-section {
            overflow: hidden;
            transition: max-height 0.4s ease-out, opacity 0.3s ease-in-out, margin-top 0.4s ease-out, padding-top 0.4s ease-out;
            max-height: 0;
            opacity: 0;
        }
        .conditional-section.visible {
            max-height: 1000px; /* Large enough for content */
            opacity: 1;
            margin-top: var(--space-large);
            padding-top: var(--space-large);
            border-top: 2px solid var(--brand-background-light);
        }
        .info-box {
            background-color: var(--brand-blue-background);
            border-left: 4px solid var(--brand-trusted-blue);
            padding: var(--space-medium);
            margin-bottom: var(--space-large);
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }
        .declaration-box {
            background-color: #fffbe6; /* Light Yellow */
            border-left: 4px solid #ffbf00; /* Amber */
            padding: var(--space-medium);
        }
        .button-container {
            margin-top: var(--space-x-large);
            text-align: center;
        }
        
        /* --- SUCCESS/EXPIRED STATE --- */
        .success-state {
            text-align: center;
            padding: var(--space-x-large);
        }
        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--space-large);
            border-radius: 50%;
            background: var(--brand-calming-green);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .success-icon svg {
            color: var(--brand-white);
            width: 40px;
            height: 40px;
        }

        /* --- RESPONSIVE STYLES --- */
        @media (max-width: 768px) {
            h1 { font-size: 1.75rem; }
            h2 { font-size: 1.25rem; }
            .page-container {
                margin: 0;
                padding: var(--space-medium);
            }
            .card {
                padding: var(--space-medium);
            }
        }
    </style>
</head>
<body>

    <main id="pageContainer" class="page-container">
        <header class="page-header">
            <div class="logo">Legal Aid</div>
            <h1>Interim Benefit Offer Response</h1>
            <p class="text-small">Please review the offer below and submit your response.</p>
        </header>

        <form id="interimBenefitForm">
            <div id="formContent">
                <section class="card">
                    <h2>Claim Details</h2>
                    <div class="read-only-field">
                        <span class="label">Injured Worker Name</span>
                        <span class="value">Jane Doe</span>
                    </div>
                    <div class="read-only-field">
                        <span class="label">Claim Number</span>
                        <span class="value">C-2024-84321</span>
                    </div>
                </section>
    
                <section class="card">
                    <h2>Your Offer</h2>
    
                    <!-- Medical Expenses Section -->
                    <div id="medicalOfferSection" class="form-section">
                        <h3>Medical Expenses</h3>
                        <p>We can pay for reasonably necessary medical expenses while your claim is being assessed.</p>
                        <div class="form-group">
                            <label class="label-strong" for="intendToClaimMedical">Do you intend to claim medical expenses?</label>
                            <label class="form-control" for="intendToClaimMedical">
                                <input type="checkbox" id="intendToClaimMedical" name="intendToClaimMedical" aria-describedby="medicalHelpText">
                                <span class="control-indicator"></span>
                                <span class="form-control-label">Yes, I intend to claim medical expenses.</span>
                            </label>
                            <p class="text-small" id="medicalHelpText">This helps us prepare for any upcoming invoices from your medical providers.</p>
                        </div>
                    </div>
    
                    <!-- Income Support Section -->
                    <div id="incomeOfferSection" class="form-section">
                        <h3>Income Support</h3>
                        <p>We are offering weekly payments to support you while you are unable to work.</p>
                        <div class="read-only-field">
                            <span class="label">Weekly Benefit Amount</span>
                            <span class="value">$875.50</span>
                        </div>
                        <div class="read-only-field">
                            <span class="label">First Payment Date</span>
                            <span class="value">28 July 2024</span>
                        </div>
                        <div class="form-group" style="margin-top: var(--space-large);">
                            <label class="label-strong" for="acceptIncomeSupport">Do you accept this income support offer?</label>
                            <label class="form-control" for="acceptIncomeSupportYes">
                                <input type="radio" id="acceptIncomeSupportYes" name="acceptIncomeSupport" value="accept" required>
                                <span class="control-indicator"></span>
                                <span class="form-control-label">Accept</span>
                            </label>
                            <label class="form-control" for="acceptIncomeSupportNo">
                                <input type="radio" id="acceptIncomeSupportNo" name="acceptIncomeSupport" value="not-accept" required>
                                <span class="control-indicator"></span>
                                <span class="form-control-label">Do Not Accept</span>
                            </label>
                        </div>
                    </div>
    
                    <!-- Conditional EFT Details Section -->
                    <div id="eftDetailsSection" class="conditional-section">
                        <h3>Payment Details</h3>
                        <p>Please provide your bank account details for payments. Payments are made via Electronic Funds Transfer (EFT).</p>
                        <div class="form-group">
                            <label for="bankAccountName" class="label-strong">Account Name</label>
                            <input type="text" id="bankAccountName" name="bankAccountName" class="input-text" placeholder="e.g., J Doe" required>
                        </div>
                        <div class="form-group">
                            <label for="bsb" class="label-strong">BSB</label>
                            <input type="text" id="bsb" name="bsb" class="input-text" placeholder="e.g., 000-000" pattern="[0-9]{3}-?[0-9]{3}" maxlength="7" required>
                        </div>
                        <div class="form-group">
                            <label for="accountNumber" class="label-strong">Account Number</label>
                            <input type="text" id="accountNumber" name="accountNumber" class="input-text" placeholder="e.g., 123456789" pattern="[0-9]{5,9}" maxlength="9" required>
                        </div>
                    </div>
    
                    <!-- Conditional TFN Upload Section -->
                    <div id="tfnUploadSection" class="conditional-section">
                        <h3>Tax File Number (TFN) Declaration</h3>
                        <div class="info-box">
                            <p class="text-small">To ensure you are taxed correctly on your weekly payments, you must provide a completed TFN Declaration form. You can download a blank form from the ATO website.</p>
                        </div>
                        <div class="form-group">
                            <div class="file-upload-wrapper">
                                <input type="file" id="tfnFile" name="tfnFile" accept=".pdf,.jpg,.jpeg,.png" aria-label="Upload TFN Declaration Form">
                                <label for="tfnFile" class="file-upload-label">Click to upload or drag and drop</label>
                                <span id="fileName" class="text-small">PDF, JPG, or PNG. Max file size 5MB.</span>
                            </div>
                        </div>
                    </div>
    
                    <!-- Conditional Declaration Section -->
                    <div id="declarationSection" class="conditional-section">
                        <div class="declaration-box">
                            <h3>Declaration</h3>
                            <p>You have chosen not to accept parts of the interim benefit offer. Please confirm you understand the implications.</p>
                            <div class="form-group">
                                <label class="form-control" for="checkDeclaration">
                                    <input type="checkbox" id="checkDeclaration" name="checkDeclaration">
                                    <span class="control-indicator"></span>
                                    <span class="form-control-label"><strong>I acknowledge that by not accepting the offer(s), I may not receive payments for medical expenses or income support during the claim assessment period.</strong></span>
                                </label>
                            </div>
                        </div>
                    </div>
    
                </section>

                <div class="button-container">
                    <button type="submit" id="submitButton" class="btn btn-primary btn-block" disabled>Submit Response</button>
                </div>
            </div>

            <!-- Success/Expired State (Initially hidden) -->
            <div id="successState" class="card success-state hidden">
                <div class="success-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                    </svg>
                </div>
                <h2>Response Submitted</h2>
                <p>Thank you, Jane. We have received your response on <span id="submissionTimestamp"></span>.</p>
                <p class="text-small">Your case manager will be in touch if further information is required. This link has now expired and cannot be used again.</p>
            </div>
        </form>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM ELEMENT REFERENCES ---
            const form = document.getElementById('interimBenefitForm');
            const formContent = document.getElementById('formContent');
            const successState = document.getElementById('successState');
            
            // Offer inputs
            const intendToClaimMedical = document.getElementById('intendToClaimMedical');
            const acceptIncomeRadio = document.querySelector('input[name="acceptIncomeSupport"][value="accept"]');
            const notAcceptIncomeRadio = document.querySelector('input[name="acceptIncomeSupport"][value="not-accept"]');
            
            // Conditional sections
            const eftDetailsSection = document.getElementById('eftDetailsSection');
            const tfnUploadSection = document.getElementById('tfnUploadSection');
            const declarationSection = document.getElementById('declarationSection');

            // Conditional inputs
            const checkDeclaration = document.getElementById('checkDeclaration');
            const bankAccountName = document.getElementById('bankAccountName');
            const bsb = document.getElementById('bsb');
            const accountNumber = document.getElementById('accountNumber');

            // File upload UI
            const tfnFileInput = document.getElementById('tfnFile');
            const fileNameDisplay = document.getElementById('fileName');

            // Action button
            const submitButton = document.getElementById('submitButton');

            // --- STATE CHECKERS ---
            const isMedicalAccepted = () => intendToClaimMedical.checked;
            const isIncomeAccepted = () => acceptIncomeRadio.checked;
            const isIncomeRejected = () => notAcceptIncomeRadio.checked;
            const isIncomeDecisionMade = () => isIncomeAccepted() || isIncomeRejected();

            // --- UI UPDATE LOGIC ---
            function updateFormState() {
                // 1. EFT Details Visibility
                const showEft = isMedicalAccepted() || isIncomeAccepted();
                eftDetailsSection.classList.toggle('visible', showEft);
                bankAccountName.required = showEft;
                bsb.required = showEft;
                accountNumber.required = showEft;

                // 2. TFN Upload Visibility
                const showTfn = isIncomeAccepted();
                tfnUploadSection.classList.toggle('visible', showTfn);
                // TFN form is not mandatory to submit, so no .required change

                // 3. Declaration Visibility (If any part of an offer is rejected)
                // In this design, only income support can be rejected via radio button.
                // The medical checkbox is an "intent", not an "acceptance".
                // Therefore, the declaration appears if income is not accepted.
                const showDeclaration = isIncomeRejected();
                declarationSection.classList.toggle('visible', showDeclaration);
                checkDeclaration.required = showDeclaration;
                if (!showDeclaration) {
                    checkDeclaration.checked = false; // Reset if hidden
                }
                
                updateSubmitButtonState();
            }

            function updateSubmitButtonState() {
                let isFormValid = false;
                
                // Income decision is mandatory
                if (!isIncomeDecisionMade()) {
                    isFormValid = false;
                } else {
                    // If declaration is required, it must be checked
                    if (declarationSection.classList.contains('visible')) {
                        isFormValid = checkDeclaration.checked;
                    } else {
                        // If no declaration required, form is valid if income decision is made
                        isFormValid = true;
                    }
                }
                
                submitButton.disabled = !isFormValid;
            }

            // --- EVENT LISTENERS ---
            form.addEventListener('change', updateFormState);

            tfnFileInput.addEventListener('change', () => {
                if (tfnFileInput.files.length > 0) {
                    fileNameDisplay.textContent = tfnFileInput.files[0].name;
                } else {
                    fileNameDisplay.textContent = 'PDF, JPG, or PNG. Max file size 5MB.';
                }
            });

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Simulate submission
                submitButton.textContent = 'Submitting...';
                submitButton.disabled = true;

                setTimeout(() => {
                    // Record timestamp
                    const now = new Date();
                    const formattedTimestamp = now.toLocaleDateString('en-AU', {
                        day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit'
                    });
                    document.getElementById('submissionTimestamp').textContent = formattedTimestamp;
                    
                    // Hide form and show success state
                    formContent.classList.add('hidden');
                    successState.classList.remove('hidden');

                    // Scroll to top to see message
                    window.scrollTo(0, 0);

                }, 1500); // Simulate network delay
            });

            // --- INITIALIZATION ---
            updateFormState();
        });
    </script>
</body>
</html>