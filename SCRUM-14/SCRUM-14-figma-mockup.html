<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interim Benefit Offer Response</title>
    <style>
        /* --- DESIGN SYSTEM & SLDS-LIKE STYLING --- */

        /* 1. Root Variables & Global Styles */
        :root {
            /* Legal Aid Colour Palette */
            --brand-primary: #C10E02; /* Empower Red */
            --brand-primary-dark: #A10C02;
            --brand-secondary: #004A80; /* Trusted Blue */
            --brand-text-primary: #1D1D1D;
            --brand-text-secondary: #545454;
            --brand-border: #C8C8C8;
            --brand-background-light: #F4F5F6;
            --brand-background-disabled: #E6E6E6;
            --brand-success: #21A179;
            --brand-white: #FFFFFF;
            --brand-focus-shadow: 0 0 0 2px var(--brand-white), 0 0 0 4px rgba(193, 14, 2, 0.6);

            /* Spacing Tokens */
            --space-xs: 4px;
            --space-s: 8px;
            --space-m: 16px;
            --space-l: 24px;
            --space-xl: 32px;

            /* Typography */
            --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-sans);
            background-color: var(--brand-background-light);
            color: var(--brand-text-primary);
            font-size: 16px;
            line-height: 1.5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--space-l) var(--space-m);
        }

        /* 2. Typography Classes (Based on Spec) */
        .heading-1 { font-size: 2rem; font-weight: 700; line-height: 1.2; margin: 0 0 var(--space-l) 0; }
        .heading-3 { font-size: 1.5rem; font-weight: 600; line-height: 1.3; margin: 0 0 var(--space-m) 0; }
        .heading-5 { font-size: 1.125rem; font-weight: 600; margin: 0 0 var(--space-s) 0; }
        .body-large { font-size: 1.125rem; }
        .body-paragraph { font-size: 1rem; color: var(--brand-text-secondary); }
        .body-small { font-size: 0.875rem; color: var(--brand-text-secondary); }
        .text-strong { font-weight: 700; color: var(--brand-text-primary); }

        /* 3. Layout & Card Component */
        .page-container {
            width: 100%;
            max-width: 800px;
            transition: opacity 0.3s ease-in-out;
        }

        .card {
            background-color: var(--brand-white);
            border: 1px solid var(--brand-border);
            border-radius: 8px;
            padding: var(--space-xl);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            margin-bottom: var(--space-l);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: var(--space-m);
            border-bottom: 1px solid var(--brand-border);
            padding-bottom: var(--space-m);
            margin-bottom: var(--space-l);
        }

        .logo-placeholder {
            width: 48px;
            height: 48px;
            background-color: var(--brand-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--brand-white);
            font-weight: bold;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .card-footer {
            margin-top: var(--space-l);
            padding-top: var(--space-l);
            border-top: 1px solid var(--brand-border);
            display: flex;
            justify-content: flex-end;
        }

        /* 4. Form Elements & Controls */
        .form-group {
            margin-bottom: var(--space-l);
        }
        
        fieldset.form-group {
            border: none;
            padding: 0;
            margin: 0 0 var(--space-l) 0;
        }

        legend.heading-5 {
             width: 100%;
             padding-bottom: var(--space-s);
             border-bottom: 1px solid #e0e0e0;
             margin-bottom: var(--space-m);
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--space-s);
            color: var(--brand-text-primary);
        }
        
        .readonly-group {
            display: flex;
            gap: var(--space-xl);
            margin-bottom: var(--space-m);
        }

        .readonly-field {
            background-color: var(--brand-background-light);
            padding: var(--space-s) var(--space-m);
            border-radius: 4px;
            border: 1px solid var(--brand-border);
        }
        
        .readonly-field .form-label {
            font-size: 0.8rem;
            margin-bottom: var(--space-xs);
            color: var(--brand-text-secondary);
        }
        
        .readonly-field .value {
            font-weight: 600;
        }

        .input-field {
            width: 100%;
            padding: var(--space-s) var(--space-m);
            border: 1px solid var(--brand-border);
            border-radius: 4px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        .input-field:focus-visible {
            outline: none;
            border-color: var(--brand-primary);
            box-shadow: var(--brand-focus-shadow);
        }
        
        /* 5. Custom Radio & Checkbox (CRITICAL STYLING) */
        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-m);
        }

        .radio-control, .checkbox-control {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            position: relative;
        }

        .radio-control input, .checkbox-control input {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .radio-label, .checkbox-label {
            padding-left: 28px;
            user-select: none;
        }
        
        /* Custom Radio Button */
        .radio-custom {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 20px;
            width: 20px;
            background-color: var(--brand-white);
            border: 2px solid var(--brand-border);
            border-radius: 50%;
            transition: border-color 0.2s;
        }

        .radio-control:hover .radio-custom { border-color: var(--brand-primary); }
        .radio-control input:checked ~ .radio-custom { border-color: var(--brand-primary); }
        .radio-control input:focus-visible ~ .radio-custom { box-shadow: var(--brand-focus-shadow); }

        .radio-custom::after {
            content: "";
            position: absolute;
            display: none;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--brand-primary); /* CRITICAL: Red inner dot */
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.2s ease-in-out;
        }
        
        .radio-control input:checked ~ .radio-custom::after {
            display: block;
            transform: translate(-50%, -50%) scale(1);
        }
        
        /* Custom Checkbox */
        .checkbox-custom {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 20px;
            width: 20px;
            background-color: var(--brand-white);
            border: 2px solid var(--brand-border);
            border-radius: 4px;
            transition: border-color 0.2s, background-color 0.2s;
        }

        .checkbox-control:hover .checkbox-custom { border-color: var(--brand-primary); }
        .checkbox-control input:checked ~ .checkbox-custom { border-color: var(--brand-primary); background-color: var(--brand-white); }
        .checkbox-control input:focus-visible ~ .checkbox-custom { box-shadow: var(--brand-focus-shadow); }

        .checkbox-custom::after {
            content: "";
            position: absolute;
            display: none;
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid var(--brand-primary); /* CRITICAL: Red checkmark */
            border-width: 0 3px 3px 0;
            transform: rotate(45deg) scale(0);
            transition: transform 0.2s ease-in-out;
        }
        
        .checkbox-control input:checked ~ .checkbox-custom::after {
            display: block;
            transform: rotate(45deg) scale(1);
        }


        /* 6. File Upload Component */
        .file-upload-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        .file-upload-btn {
            border: 1px solid var(--brand-border);
            background-color: var(--brand-background-light);
            color: var(--brand-text-primary);
            padding: var(--space-s) var(--space-m);
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
        }
        .file-upload-wrapper input[type=file] {
            font-size: 100px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }
        .file-name {
            margin-left: var(--space-m);
            font-style: italic;
            color: var(--brand-text-secondary);
        }

        /* 7. Button Component */
        .btn {
            border: none;
            border-radius: 4px;
            padding: var(--space-s) var(--space-l);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 120px;
            text-decoration: none;
        }
        
        .btn:focus-visible {
            outline: none;
            box-shadow: var(--brand-focus-shadow);
        }

        .btn-primary {
            background-color: var(--brand-primary);
            color: var(--brand-white);
        }
        .btn-primary:hover:not(:disabled) {
            background-color: var(--brand-primary-dark);
        }
        .btn:disabled {
            background-color: var(--brand-background-disabled);
            color: var(--brand-text-secondary);
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .btn .spinner {
            display: none;
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 50%;
            border-top-color: var(--brand-white);
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        
        .btn.loading .spinner { display: inline-block; }
        .btn.loading .btn-text { opacity: 0.7; }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* 8. Utility & Helper Classes */
        .hidden {
            display: none !important;
        }

        .collapsible {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out, margin-top 0.5s ease-in-out;
            margin-top: 0;
        }

        .collapsible.show {
            max-height: 500px; /* Adjust as needed */
            opacity: 1;
            margin-top: var(--space-l);
        }
        
        .success-icon, .error-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto var(--space-m);
        }
        
        .success-icon path { stroke: var(--brand-success); }
        .error-icon path { stroke: var(--brand-primary); }

        .text-center { text-align: center; }

        /* 9. Responsive Design */
        @media (max-width: 600px) {
            body { padding: var(--space-m) var(--space-s); }
            .page-container { max-width: 100%; }
            .card { padding: var(--space-l) var(--space-m); }
            .card-header { flex-direction: column; text-align: center; }
            .readonly-group { flex-direction: column; gap: var(--space-m); }
            .card-footer { justify-content: center; }
            .btn { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="page-container" id="form-container">
        <div class="card">
            <header class="card-header">
                <div class="logo-placeholder" aria-hidden="true">LA</div>
                <div>
                    <h1 class="heading-3">Interim Benefit Offer Response</h1>
                    <p class="body-paragraph">Please review your offer and respond below.</p>
                </div>
            </header>

            <main>
                <form id="benefit-response-form" novalidate>
                    <!-- Injured Worker Details -->
                    <div class="form-group readonly-group">
                         <div class="readonly-field">
                            <label class="form-label">Injured Worker Name</label>
                            <div class="value" id="worker-name">Jane Doe</div>
                        </div>
                        <div class="readonly-field">
                            <label class="form-label">Claim Number</label>
                            <div class="value" id="claim-number">CL-2024-58739</div>
                        </div>
                    </div>
                    
                    <!-- Medical Expenses Offer -->
                    <fieldset class="form-group" id="medical-offer-section">
                        <legend class="heading-5">Medical Expenses</legend>
                        <p class="body-paragraph" style="margin-bottom: var(--space-m);">Do you intend to claim medical expenses while your claim is being assessed?</p>
                        <div class="radio-group">
                            <label class="radio-control">
                                <input type="radio" name="medicalExpenses" value="yes" required>
                                <span class="radio-custom"></span>
                                <span class="radio-label">Yes, I intend to claim medical expenses</span>
                            </label>
                            <label class="radio-control">
                                <input type="radio" name="medicalExpenses" value="no">
                                <span class="radio-custom"></span>
                                <span class="radio-label">No, I do not intend to claim medical expenses at this time</span>
                            </label>
                        </div>
                    </fieldset>
                    
                    <!-- Income Support Offer -->
                    <fieldset class="form-group" id="income-offer-section">
                        <legend class="heading-5">Income Support</legend>
                        <div class="readonly-group">
                            <div class="readonly-field">
                                <label class="form-label">Weekly Benefit Amount</label>
                                <div class="value">$745.50</div>
                            </div>
                            <div class="readonly-field">
                                <label class="form-label">Start Date</label>
                                <div class="value">28 July 2024</div>
                            </div>
                        </div>
                        <p class="body-paragraph" style="margin-bottom: var(--space-m);">Do you accept the weekly income support benefit?</p>
                        <div class="radio-group">
                            <label class="radio-control">
                                <input type="radio" name="incomeSupport" value="accept" required>
                                <span class="radio-custom"></span>
                                <span class="radio-label">Accept</span>
                            </label>
                            <label class="radio-control">
                                <input type="radio" name="incomeSupport" value="not_accept">
                                <span class="radio-custom"></span>
                                <span class="radio-label">Not Accept</span>
                            </label>
                        </div>
                    </fieldset>

                    <!-- Conditional: EFT Details -->
                    <div id="eft-details-section" class="collapsible">
                        <div class="form-group">
                            <h3 class="heading-5">Electronic Funds Transfer (EFT) Details</h3>
                            <p class="body-small">Please provide your bank details for payment. These details will be stored securely.</p>
                        </div>
                        <div class="form-group">
                            <label for="bsb" class="form-label">BSB</label>
                            <input type="tel" id="bsb" name="bsb" class="input-field" placeholder="e.g., 000-000" maxlength="7" required>
                        </div>
                        <div class="form-group">
                            <label for="account-number" class="form-label">Account Number</label>
                            <input type="tel" id="account-number" name="accountNumber" class="input-field" placeholder="e.g., 123456789" required>
                        </div>
                         <div class="form-group">
                            <label for="account-name" class="form-label">Account Name</label>
                            <input type="text" id="account-name" name="accountName" class="input-field" placeholder="e.g., J Doe" required>
                        </div>
                    </div>
                    
                    <!-- Conditional: TFN Declaration Upload -->
                    <div id="tfn-upload-section" class="collapsible">
                        <div class="form-group">
                           <h3 class="heading-5">Tax File Number (TFN) Declaration</h3>
                           <p class="body-small">To ensure you are taxed correctly, please upload a completed TFN declaration form. <a href="#" target="_blank">Download form here</a>.</p>
                       </div>
                        <div class="form-group">
                           <label for="tfn-file" class="form-label">Upload TFN Declaration Form</label>
                            <div class="file-upload-wrapper">
                                <button type="button" class="file-upload-btn">Choose File</button>
                                <input type="file" id="tfn-file" name="tfnFile" accept=".pdf,.doc,.docx,.jpg,.png" required>
                            </div>
                           <span class="file-name" id="tfn-file-name">No file chosen</span>
                        </div>
                    </div>
                    
                    <!-- Conditional: Not Accepting Declaration -->
                    <div id="declaration-section" class="collapsible">
                        <div class="form-group">
                             <h3 class="heading-5">Declaration</h3>
                             <div class="checkbox-group">
                                 <label class="checkbox-control">
                                     <input type="checkbox" name="declaration" id="declaration-checkbox" required>
                                     <span class="checkbox-custom"></span>
                                     <span class="checkbox-label text-strong">I acknowledge that by not accepting an offer, a case manager will contact me to discuss the reasons.</span>
                                 </label>
                             </div>
                        </div>
                    </div>
                    
                    <div class="card-footer">
                        <button type="submit" id="submit-btn" class="btn btn-primary" disabled>
                            <span class="spinner" role="status" aria-hidden="true"></span>
                            <span class="btn-text">Submit Response</span>
                        </button>
                    </div>
                </form>
            </main>
        </div>
    </div>
    
    <!-- Success Message Container -->
    <div id="success-container" class="page-container hidden">
        <div class="card text-center">
            <svg class="success-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8 12L11 15L16 10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h2 class="heading-3">Response Submitted Successfully</h2>
            <p class="body-paragraph">Thank you, <span id="success-worker-name">Jane Doe</span>. We have received your response for claim <strong id="success-claim-number">CL-2024-58739</strong>.</p>
            <p class="body-paragraph">Your submission was recorded on <strong id="submission-datetime"></strong>.</p>
            <p class="body-small" style="margin-top:var(--space-l);">This link has now expired and cannot be used again. If you have any questions, please contact your case manager.</p>
        </div>
    </div>
    
    <!-- Expired/Error Message Container -->
    <div id="expired-container" class="page-container hidden">
         <div class="card text-center">
            <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 8V12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 16H12.01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h2 class="heading-3">Link Expired or Invalid</h2>
            <p class="body-paragraph">This link to respond to the interim benefit offer has expired or is no longer valid. This may be because a response has already been submitted.</p>
            <p class="body-paragraph" style="margin-top:var(--space-m);">If you believe this is an error, please contact your case manager for assistance.</p>
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- DOM ELEMENT REFERENCES ---
    const form = document.getElementById('benefit-response-form');
    const formContainer = document.getElementById('form-container');
    const successContainer = document.getElementById('success-container');
    const expiredContainer = document.getElementById('expired-container');
    
    // Offers
    const medicalOfferSection = document.getElementById('medical-offer-section');
    const incomeOfferSection = document.getElementById('income-offer-section');
    const medicalRadios = document.querySelectorAll('input[name="medicalExpenses"]');
    const incomeRadios = document.querySelectorAll('input[name="incomeSupport"]');
    
    // Conditional Sections
    const eftSection = document.getElementById('eft-details-section');
    const tfnSection = document.getElementById('tfn-upload-section');
    const declarationSection = document.getElementById('declaration-section');
    
    // Conditional Inputs
    const bsbInput = document.getElementById('bsb');
    const accountNumberInput = document.getElementById('account-number');
    const accountNameInput = document.getElementById('account-name');
    const tfnFileInput = document.getElementById('tfn-file');
    const tfnFileName = document.getElementById('tfn-file-name');
    const declarationCheckbox = document.getElementById('declaration-checkbox');

    // Action
    const submitBtn = document.getElementById('submit-btn');

    // --- INITIAL STATE & CONFIGURATION ---
    
    const urlParams = new URLSearchParams(window.location.search);
    
    // Simulate expired link state
    if (urlParams.get('status') === 'expired') {
        formContainer.classList.add('hidden');
        expiredContainer.classList.remove('hidden');
        return; // Stop further execution
    }

    // Simulate which offers are available based on URL params
    const hasMedicalOffer = urlParams.get('medical') !== 'false';
    const hasIncomeOffer = urlParams.get('income') !== 'false';

    if (!hasMedicalOffer) medicalOfferSection.classList.add('hidden');
    if (!hasIncomeOffer) incomeOfferSection.classList.add('hidden');
    if (!hasMedicalOffer && !hasIncomeOffer) {
        formContainer.classList.add('hidden');
        expiredContainer.classList.remove('hidden'); // Show error if no offers
        return;
    }

    // --- EVENT LISTENERS ---
    
    form.addEventListener('change', updateFormState);
    form.addEventListener('input', updateFormState); // For text fields

    tfnFileInput.addEventListener('change', () => {
        tfnFileName.textContent = tfnFileInput.files.length > 0 ? tfnFileInput.files[0].name : 'No file chosen';
        updateFormState();
    });

    form.addEventListener('submit', handleSubmit);
    
    // --- CORE LOGIC ---

    function updateFormState() {
        const medicalResponse = getSelectedRadioValue('medicalExpenses');
        const incomeResponse = getSelectedRadioValue('incomeSupport');
        
        // Show/hide EFT details
        const shouldShowEft = (hasMedicalOffer && medicalResponse === 'yes') || (hasIncomeOffer && incomeResponse === 'accept');
        toggleSection(eftSection, shouldShowEft);
        
        // Show/hide TFN upload
        const shouldShowTfn = hasIncomeOffer && incomeResponse === 'accept';
        toggleSection(tfnSection, shouldShowTfn);

        // Show/hide Declaration
        const shouldShowDeclaration = (hasMedicalOffer && medicalResponse === 'no') || (hasIncomeOffer && incomeResponse === 'not_accept');
        toggleSection(declarationSection, shouldShowDeclaration);

        // Update required attributes based on visibility
        setRequired(bsbInput, shouldShowEft);
        setRequired(accountNumberInput, shouldShowEft);
        setRequired(accountNameInput, shouldShowEft);
        setRequired(tfnFileInput, shouldShowTfn);
        setRequired(declarationCheckbox, shouldShowDeclaration);

        // Enable/disable submit button
        submitBtn.disabled = !isFormValid();
    }
    
    function isFormValid() {
        // 1. Check that a selection has been made for each offered section
        if (hasMedicalOffer && !getSelectedRadioValue('medicalExpenses')) return false;
        if (hasIncomeOffer && !getSelectedRadioValue('incomeSupport')) return false;
        
        // 2. Check conditional fields IF they are visible
        if (eftSection.classList.contains('show')) {
            if (!bsbInput.value.trim() || !accountNumberInput.value.trim() || !accountNameInput.value.trim()) return false;
        }
        if (tfnSection.classList.contains('show')) {
            if (tfnFileInput.files.length === 0) return false;
        }
        if (declarationSection.classList.contains('show')) {
            if (!declarationCheckbox.checked) return false;
        }

        return true;
    }

    function handleSubmit(e) {
        e.preventDefault();
        if (!isFormValid()) return;

        submitBtn.classList.add('loading');
        submitBtn.disabled = true;
        
        // Disable all form fields during submission
        Array.from(form.elements).forEach(el => el.disabled = true);
        
        // Simulate API call
        setTimeout(() => {
            // Populate success message
            document.getElementById('success-worker-name').textContent = document.getElementById('worker-name').textContent;
            document.getElementById('success-claim-number').textContent = document.getElementById('claim-number').textContent;
            document.getElementById('submission-datetime').textContent = new Date().toLocaleString('en-AU');
            
            // Show success message and hide form
            formContainer.style.opacity = 0;
            setTimeout(() => {
                 formContainer.classList.add('hidden');
                 successContainer.classList.remove('hidden');
            }, 300);
            
            // In a real app, you would redirect or update history
            // to a URL like ?status=expired to prevent resubmission
            // window.history.replaceState(null, '', '?status=expired');

        }, 1500);
    }

    // --- HELPER FUNCTIONS ---

    function getSelectedRadioValue(name) {
        const selectedRadio = document.querySelector(`input[name="${name}"]:checked`);
        return selectedRadio ? selectedRadio.value : null;
    }

    function toggleSection(sectionElement, shouldShow) {
        if (shouldShow) {
            sectionElement.classList.add('show');
        } else {
            sectionElement.classList.remove('show');
        }
    }
    
    function setRequired(element, isRequired) {
        element.required = isRequired;
        element.setAttribute('aria-required', isRequired);
    }
    
    // Initial check in case the form is pre-filled
    updateFormState();

});
</script>
</body>
</html>