<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interim Benefit Offer Response</title>
    
    <style>
        /* --- DESIGN SYSTEM & RESET --- */
        :root {
            /* Legal Aid Colour Palette */
            --brand-primary-red: #C10E02;
            --brand-trusted-blue: #004A80;
            --brand-calming-green: #21A179;
            --brand-purple-care: #B46CAC;
            --brand-optimistic-orange: #FF9F1C;
            
            --neutral-darkest: #1D1D1D;
            --neutral-darker: #343434;
            --neutral-dark: #545454;
            --neutral-medium: #919191;
            --neutral-light: #C8C8C8;
            --neutral-lighter: #E6E6E6;
            --neutral-lightest: #F4F5F6;
            --neutral-white: #FFFFFF;

            /* Semantic Colors */
            --color-text-default: var(--neutral-darkest);
            --color-text-secondary: var(--neutral-dark);
            --color-background-page: var(--neutral-lightest);
            --color-background-card: var(--neutral-white);
            --color-border-default: var(--neutral-lighter);
            --color-border-focus: var(--brand-primary-red);
            --color-action: var(--brand-primary-red);

            /* Typography */
            --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            
            /* Sizing & Spacing (8px grid) */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-xxl: 48px;
            
            /* Effects */
            --shadow-card: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.08);
            --shadow-focus: 0 0 0 3px rgba(193, 14, 2, 0.3);
            --border-radius: 6px;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: var(--font-family-sans);
            background-color: var(--color-background-page);
            color: var(--color-text-default);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- LAYOUT & MAIN COMPONENTS --- */
        .page-container {
            max-width: 800px;
            margin: var(--space-lg) auto;
            padding: var(--space-md);
        }

        .page-header {
            text-align: center;
            margin-bottom: var(--space-xl);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
        }
        
        .logo {
            width: 150px;
            height: auto;
            color: var(--brand-primary-red);
        }

        .main-card {
            background-color: var(--color-background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-card);
            border: 1px solid var(--color-border-default);
            overflow: hidden;
        }

        .card-header, .card-body, .card-footer {
            padding: var(--space-lg);
        }

        .card-header {
            border-bottom: 1px solid var(--color-border-default);
        }

        .card-footer {
            background-color: var(--neutral-lightest);
            border-top: 1px solid var(--color-border-default);
            text-align: right;
        }
        
        .section + .section {
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px dashed var(--color-border-default);
        }

        /* --- TYPOGRAPHY (Based on Design System Spec) --- */
        h1 { /* Heading 3 */
            font-size: 1.75rem;
            font-weight: 700;
            line-height: 1.2;
            color: var(--neutral-darkest);
        }

        h2 { /* Heading 4 */
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--space-md);
            color: var(--neutral-darker);
        }

        p, label { /* Body 2 - Paragraph */
            font-size: 1rem;
            color: var(--color-text-default);
        }
        
        .text-secondary {
            color: var(--color-text-secondary);
            font-size: 0.875rem;
        }

        .text-strong {
            font-weight: 600;
        }

        /* --- FORM ELEMENTS (SLDS Pattern + Custom Styling) --- */
        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-element {
            margin-bottom: var(--space-md);
        }
        
        .form-element__label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--space-sm);
            font-size: 0.875rem;
        }
        
        .form-element__control {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .input, .file-input-wrapper label {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--neutral-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .input:focus, .file-input-wrapper input[type="file"]:focus + label {
            outline: none;
            border-color: var(--color-border-focus);
            box-shadow: var(--shadow-focus);
        }

        .input[readonly] {
            background-color: var(--neutral-lightest);
            cursor: not-allowed;
            border-color: var(--color-border-default);
        }

        /* Custom Radio & Checkbox (CRITICAL STYLING REQUIREMENT) */
        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }
        
        .radio, .checkbox {
            position: relative;
            display: flex;
            align-items: center;
            cursor: pointer;
            padding-left: 28px;
            min-height: 20px;
        }

        .radio input, .checkbox input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        
        .radio .checkmark, .checkbox .checkmark {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            height: 20px;
            width: 20px;
            background-color: var(--neutral-white);
            border: 2px solid var(--neutral-medium);
            transition: all 0.2s ease-in-out;
        }

        .radio .checkmark {
            border-radius: 50%;
        }
        
        .checkbox .checkmark {
            border-radius: 4px;
        }

        .radio:hover input ~ .checkmark, .checkbox:hover input ~ .checkmark {
            border-color: var(--neutral-dark);
        }
        
        .radio input:checked ~ .checkmark, .checkbox input:checked ~ .checkmark {
            border-color: var(--brand-primary-red);
        }

        .radio input:focus ~ .checkmark, .checkbox input:focus ~ .checkmark {
            box-shadow: var(--shadow-focus);
        }
        
        /* Inner dot/tick styling (RED as per spec) */
        .radio .checkmark:after, .checkbox .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        .radio input:checked ~ .checkmark:after, .checkbox input:checked ~ .checkmark:after {
            display: block;
        }

        /* Radio inner dot */
        .radio .checkmark:after {
            top: 4px;
            left: 4px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--brand-primary-red); /* CRITICAL: Red inner dot */
        }
        
        /* Checkbox inner tick */
        .checkbox .checkmark:after {
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border-style: solid;
            border-color: var(--brand-primary-red); /* CRITICAL: Red checkmark */
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
        }

        /* File Upload */
        .file-input-wrapper {
            position: relative;
        }
        .file-input-wrapper input[type="file"] {
            opacity: 0;
            position: absolute;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        .file-input-wrapper label {
            display: inline-block;
            cursor: pointer;
            background-color: var(--neutral-white);
            text-align: center;
        }
        .file-input-wrapper label .file-name {
            margin-left: var(--space-sm);
            font-style: italic;
            color: var(--color-text-secondary);
        }
        .file-input-wrapper .icon {
            margin-right: var(--space-sm);
            vertical-align: middle;
            color: var(--neutral-dark);
        }

        /* --- BUTTONS --- */
        .btn {
            display: inline-block;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
            vertical-align: middle;
            cursor: pointer;
            border: 1px solid transparent;
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--border-radius);
            transition: background-color 0.2s, transform 0.1s;
        }

        .btn:focus {
            outline: none;
            box-shadow: var(--shadow-focus);
        }
        
        .btn:hover {
            transform: translateY(-1px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background-color: var(--brand-primary-red);
            color: var(--neutral-white);
            border-color: var(--brand-primary-red);
        }
        
        .btn-primary:hover {
            background-color: #A10C02; /* Darker red from spec */
            border-color: #A10C02;
        }

        .btn:disabled {
            background-color: var(--neutral-light);
            border-color: var(--neutral-light);
            color: var(--neutral-medium);
            cursor: not-allowed;
            transform: none;
        }

        .btn .spinner {
            display: none;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: var(--neutral-white);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto;
        }

        .btn.loading .btn-text {
            display: none;
        }
        .btn.loading .spinner {
            display: block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* --- CONDITIONAL & UTILITY CLASSES --- */
        .conditional-section {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out, margin-top 0.5s ease-in-out;
            margin-top: 0;
            padding-top: 0;
            border-top: 0;
        }
        
        .conditional-section.visible {
            max-height: 1000px; /* Large enough to not clip content */
            opacity: 1;
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px dashed var(--color-border-default);
        }
        
        .error-message {
            color: var(--brand-primary-red);
            font-size: 0.875rem;
            margin-top: var(--space-sm);
            display: none;
        }
        
        .is-invalid .input, .is-invalid .checkbox {
            border-color: var(--brand-primary-red);
        }
        
        .is-invalid + .error-message, .is-invalid .error-message {
            display: block;
        }

        /* --- SUCCESS STATE --- */
        #success-state {
            text-align: center;
            padding: var(--space-xxl) var(--space-lg);
        }

        #success-state .icon {
            width: 64px;
            height: 64px;
            color: var(--brand-calming-green);
            margin-bottom: var(--space-md);
        }

        /* --- RESPONSIVENESS --- */
        @media (max-width: 600px) {
            .page-container {
                margin: 0;
                padding: var(--space-sm);
            }
            .main-card {
                border-radius: 0;
                border-left: none;
                border-right: none;
            }
            .card-header, .card-body, .card-footer {
                padding: var(--space-md);
            }
        }
    </style>
</head>
<body>

    <main class="page-container">
        <header class="page-header">
            <!-- Simple SVG representation of a logo -->
            <svg class="logo" viewBox="0 0 100 20" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Company Logo">
                <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="currentColor">LEGAL AID</text>
            </svg>
            <h1>Interim Benefit Offer</h1>
            <p class="text-secondary">Please review your offer and respond below.</p>
        </header>

        <div id="form-container" class="main-card">
            <form id="interimBenefitForm" novalidate>
                <div class="card-body">
                    
                    <!-- Claim Details -->
                    <section class="section">
                        <h2>Claim Details</h2>
                        <div class="form-group">
                            <div class="form-element">
                                <label for="claimantName" class="form-element__label">Name</label>
                                <input type="text" id="claimantName" class="input" value="Jane Doe" readonly>
                            </div>
                            <div class="form-element">
                                <label for="claimNumber" class="form-element__label">Claim Number</label>
                                <input type="text" id="claimNumber" class="input" value="C-2024-87654" readonly>
                            </div>
                        </div>
                    </section>
                    
                    <!-- Medical Expenses Offer -->
                    <section class="section">
                        <h2>Medical Expenses</h2>
                        <div class="form-element" role="radiogroup" aria-labelledby="medical-expenses-label">
                            <p id="medical-expenses-label" class="form-element__label">Do you intend to claim medical expenses while your claim is being assessed?</p>
                            <div class="radio-group">
                                <label class="radio"> Yes
                                    <input type="radio" name="medicalExpensesResponse" value="yes" required>
                                    <span class="checkmark"></span>
                                </label>
                                <label class="radio"> No
                                    <input type="radio" name="medicalExpensesResponse" value="no" required>
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                        </div>
                    </section>

                    <!-- Income Support Offer -->
                    <section class="section">
                        <h2>Income Support</h2>
                        <div class="form-group">
                           <div class="form-element">
                                <label for="weeklyBenefit" class="form-element__label">Weekly Benefit Amount</label>
                                <input type="text" id="weeklyBenefit" class="input" value="$750.00" readonly>
                            </div>
                            <div class="form-element">
                                <label for="startDate" class="form-element__label">Start Date</label>
                                <input type="text" id="startDate" class="input" value="28-Jul-2024" readonly>
                            </div>
                        </div>
                         <div class="form-element" role="radiogroup" aria-labelledby="income-support-label">
                            <p id="income-support-label" class="form-element__label text-strong">Do you accept the income support offer?</p>
                            <div class="radio-group">
                                <label class="radio"> Accept
                                    <input type="radio" name="incomeSupportResponse" value="accept" required>
                                    <span class="checkmark"></span>
                                </label>
                                <label class="radio"> Not Accept
                                    <input type="radio" name="incomeSupportResponse" value="not-accept" required>
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                        </div>
                    </section>

                    <!-- Conditional EFT Details -->
                    <section id="eftDetailsSection" class="conditional-section section">
                        <h2>Electronic Funds Transfer (EFT) Details</h2>
                        <p class="text-secondary">Please provide your bank details for payment.</p>
                        <div class="form-group">
                             <div class="form-element">
                                <label for="bsb" class="form-element__label">BSB</label>
                                <input type="text" id="bsb" class="input" placeholder="e.g., 000-000" required>
                            </div>
                            <div class="form-element">
                                <label for="accountNumber" class="form-element__label">Account Number</label>
                                <input type="text" id="accountNumber" class="input" placeholder="e.g., 123456789" required>
                            </div>
                             <div class="form-element">
                                <label for="accountName" class="form-element__label">Account Name</label>
                                <input type="text" id="accountName" class="input" placeholder="e.g., J Doe" required>
                            </div>
                        </div>
                    </section>

                    <!-- Conditional TFN Upload -->
                    <section id="tfnUploadSection" class="conditional-section section">
                        <h2>Tax File Number (TFN) Declaration</h2>
                         <p class="text-secondary">To ensure the correct tax is withheld, please upload your completed TFN declaration form. If you don't have one, you can download it from the ATO website.</p>
                        <div class="form-element">
                             <div class="file-input-wrapper">
                                 <input type="file" id="tfnFile" name="tfnFile" accept=".pdf,.doc,.docx,.jpg,.png">
                                 <label for="tfnFile" class="input" tabindex="0" role="button" aria-controls="tfnFile">
                                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/><path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/></svg>
                                     <span class="text-strong">Upload TFN Declaration Form</span>
                                     <span class="file-name">No file chosen</span>
                                 </label>
                             </div>
                        </div>
                    </section>
                    
                    <!-- Conditional Declaration -->
                    <section id="declarationSection" class="conditional-section section">
                         <div id="declaration-group" class="form-element">
                            <div class="checkbox-group">
                                <label class="checkbox"> I understand that by not accepting the offer(s), a case manager will contact me to discuss my claim further.
                                    <input type="checkbox" id="declaration" name="declaration" required>
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                            <p id="declaration-error" class="error-message">This declaration is required to proceed.</p>
                         </div>
                    </section>

                </div>
                <div class="card-footer">
                    <button type="submit" class="btn btn-primary" id="submitButton">
                        <span class="btn-text">Submit Response</span>
                        <span class="spinner"></span>
                    </button>
                </div>
            </form>
        </div>

        <div id="success-state" class="main-card" style="display: none;" role="alert" aria-live="assertive">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
            <h1>Response Submitted</h1>
            <p>Thank you for your response. It has been successfully recorded.</p>
            <p class="text-secondary">This link has now expired and cannot be used again.</p>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DOM Elements ---
            const form = document.getElementById('interimBenefitForm');
            const medicalRadios = document.querySelectorAll('input[name="medicalExpensesResponse"]');
            const incomeRadios = document.querySelectorAll('input[name="incomeSupportResponse"]');
            
            const eftSection = document.getElementById('eftDetailsSection');
            const bsbInput = document.getElementById('bsb');
            const accountNoInput = document.getElementById('accountNumber');
            const accountNameInput = document.getElementById('accountName');
            
            const tfnSection = document.getElementById('tfnUploadSection');
            
            const declarationSection = document.getElementById('declarationSection');
            const declarationCheckbox = document.getElementById('declaration');
            const declarationGroup = document.getElementById('declaration-group');

            const tfnFileInput = document.getElementById('tfnFile');
            const tfnFileNameSpan = document.querySelector('.file-name');

            const submitButton = document.getElementById('submitButton');
            const formContainer = document.getElementById('form-container');
            const successStateContainer = document.getElementById('success-state');

            // --- Event Listeners ---
            medicalRadios.forEach(radio => radio.addEventListener('change', updateFormVisibility));
            incomeRadios.forEach(radio => radio.addEventListener('change', updateFormVisibility));
            form.addEventListener('submit', handleFormSubmit);

            if (tfnFileInput) {
                tfnFileInput.addEventListener('change', () => {
                    if (tfnFileInput.files.length > 0) {
                        tfnFileNameSpan.textContent = tfnFileInput.files[0].name;
                    } else {
                        tfnFileNameSpan.textContent = 'No file chosen';
                    }
                });
            }

            // --- Functions ---
            function updateFormVisibility() {
                const medicalResponse = getRadioValue('medicalExpensesResponse');
                const incomeResponse = getRadioValue('incomeSupportResponse');

                const showEft = medicalResponse === 'yes' || incomeResponse === 'accept';
                const showTfn = incomeResponse === 'accept';
                const showDeclaration = medicalResponse === 'no' || incomeResponse === 'not-accept';

                toggleSection(eftSection, showEft);
                setRequiredForInputs([bsbInput, accountNoInput, accountNameInput], showEft);
                
                toggleSection(tfnSection, showTfn);
                
                toggleSection(declarationSection, showDeclaration);
                declarationCheckbox.required = showDeclaration;
            }

            function getRadioValue(name) {
                const selectedRadio = document.querySelector(`input[name="${name}"]:checked`);
                return selectedRadio ? selectedRadio.value : null;
            }

            function toggleSection(section, isVisible) {
                if (isVisible) {
                    section.classList.add('visible');
                } else {
                    section.classList.remove('visible');
                }
            }
            
            function setRequiredForInputs(inputs, isRequired) {
                inputs.forEach(input => input.required = isRequired);
            }

            function handleFormSubmit(event) {
                event.preventDefault();
                
                // Custom validation for declaration checkbox
                let isDeclarationValid = true;
                if (declarationCheckbox.required && !declarationCheckbox.checked) {
                    declarationGroup.classList.add('is-invalid');
                    isDeclarationValid = false;
                } else {
                    declarationGroup.classList.remove('is-invalid');
                }

                // Check standard form validity
                if (!form.checkValidity() || !isDeclarationValid) {
                    // Browser will show default validation messages for required fields
                    return;
                }

                // Simulate submission process
                submitButton.classList.add('loading');
                submitButton.disabled = true;

                setTimeout(() => {
                    // Record data (simulation)
                    const formData = {
                        claimantName: document.getElementById('claimantName').value,
                        claimNumber: document.getElementById('claimNumber').value,
                        medicalExpensesResponse: getRadioValue('medicalExpensesResponse'),
                        incomeSupportResponse: getRadioValue('incomeSupportResponse'),
                        bsb: bsbInput.value,
                        accountNumber: accountNoInput.value,
                        accountName: accountNameInput.value,
                        hasTfnFile: tfnFileInput.files.length > 0,
                        declarationChecked: declarationCheckbox.checked,
                        submissionTimestamp: new Date().toISOString()
                    };
                    console.log('Form Submitted Data:', formData);

                    // Show success state and hide form
                    formContainer.style.display = 'none';
                    successStateContainer.style.display = 'block';
                }, 1500); // Simulate network delay
            }

            // --- Initial State ---
            updateFormVisibility();
        });
    </script>

</body>
</html>